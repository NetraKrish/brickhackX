{"ast":null,"code":"'use strict';\n\nvar request = require('request');\nvar fs = require('fs');\nvar path = require('path');\nvar apis = require('./apis').loadDefault();\nvar util = require('util');\nfunction authFromOption(options) {\n  var header = {};\n  if (options.hasOwnProperty('oauthToken')) {\n    header['Authorization'] = 'Bearer ' + options.oauthToken;\n    return header;\n  }\n  var usernamePassword, base64;\n  if (options.hasOwnProperty('basic')) {\n    var basic = options.basic;\n    if (typeof basic === 'string') {\n      header['Authorization'] = 'Basic ' + basic;\n    } else if (typeof basic === 'object') {\n      if (basic.hasOwnProperty('username') && basic.hasOwnProperty('password')) {\n        usernamePassword = basic.username + ':' + basic.password;\n        base64 = Buffer.from(usernamePassword).toString('base64');\n        header['Authorization'] = 'Basic ' + base64;\n      }\n    }\n  }\n  if (options.hasOwnProperty('token')) {\n    header['X-Cybozu-API-Token'] = options.token;\n  } else if (options.hasOwnProperty('authorization')) {\n    var authorization = options.authorization;\n    if (typeof authorization === 'string') {\n      header['X-Cybozu-Authorization'] = authorization;\n    } else if (typeof authorization === 'object') {\n      if (authorization.hasOwnProperty('username') && authorization.hasOwnProperty('password')) {\n        usernamePassword = authorization.username + ':' + authorization.password;\n        base64 = Buffer.from(usernamePassword).toString('base64');\n        header['X-Cybozu-Authorization'] = base64;\n      }\n    }\n  }\n  if (!header.hasOwnProperty('X-Cybozu-API-Token') && !header.hasOwnProperty('X-Cybozu-Authorization')) {\n    throw new TypeError('Specify \"token\" or \"authorization\"');\n  }\n  return header;\n}\nfunction merge(source, target) {\n  Object.keys(source).forEach(function (key) {\n    target[key] = source[key];\n  });\n  return target;\n}\nfunction kintone(domain, authorization) {\n  var authOption = authFromOption(authorization);\n\n  // Add .cybozu.com if only sub-domain is specified.\n  if (!domain.match('\\\\.')) {\n    domain += '.cybozu.com';\n  }\n  function requestBase(link, data, callback) {\n    var clonedLink = link.slice(0);\n    var method = clonedLink.pop();\n    clonedLink.unshift(domain, 'k', 'v1');\n    var options = {\n      url: 'https://' + clonedLink.join('/') + '.json',\n      method: method.toUpperCase(),\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    merge(authOption, options.headers);\n    request(options, function (err, response, body) {\n      callback(err, JSON.parse(body));\n    });\n  }\n  for (var i = 0; i < apis.length; ++i) {\n    var link = apis[i].split('/');\n    var head = kintone.prototype;\n    while (link.length !== 0) {\n      var key = link.shift();\n      if (!head.hasOwnProperty(key)) {\n        head[key] = {};\n      }\n      if (link.length !== 0) {\n        head = head[key];\n      } else {\n        head[key] = function (linkStr) {\n          Object.freeze(linkStr);\n          return util.promisify(function (data, callback) {\n            return requestBase(linkStr, data, callback);\n          });\n        }(apis[i].split('/'));\n      }\n    }\n  }\n  kintone.prototype.file.post = util.promisify(function (filename, callback) {\n    var options = {\n      url: 'https://' + domain + '/k/v1/file.json',\n      method: 'POST',\n      headers: {},\n      formData: {\n        file: {\n          value: fs.createReadStream(filename),\n          options: {\n            filename: path.basename(filename),\n            contentType: 'text/plain'\n          }\n        }\n      }\n    };\n    merge(authOption, options.headers);\n    request(options, function (err, response, body) {\n      callback(err, JSON.parse(body));\n    });\n  });\n  kintone.prototype.file.get = util.promisify(function (fileKey, callback) {\n    var options = {\n      url: 'https://' + domain + '/k/v1/file.json',\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        fileKey: fileKey\n      })\n    };\n    merge(authOption, options.headers);\n    request(options, function (err, response, body) {\n      callback(err, body);\n    });\n  });\n}\nmodule.exports = kintone;","map":{"version":3,"names":["request","require","fs","path","apis","loadDefault","util","authFromOption","options","header","hasOwnProperty","oauthToken","usernamePassword","base64","basic","username","password","Buffer","from","toString","token","authorization","TypeError","merge","source","target","Object","keys","forEach","key","kintone","domain","authOption","match","requestBase","link","data","callback","clonedLink","slice","method","pop","unshift","url","join","toUpperCase","headers","body","JSON","stringify","err","response","parse","i","length","split","head","prototype","shift","linkStr","freeze","promisify","file","post","filename","formData","value","createReadStream","basename","contentType","get","fileKey","module","exports"],"sources":["/Users/netrakrishnan/Desktop/brickhackX/node_modules/kintone/lib/index.js"],"sourcesContent":["'use strict';\n\nvar request = require('request');\nvar fs = require('fs');\nvar path = require('path');\nvar apis = require('./apis').loadDefault();\nvar util = require('util');\n\nfunction authFromOption(options) {\n  var header = {};\n\n  if (options.hasOwnProperty('oauthToken')) {\n    header['Authorization'] = 'Bearer ' + options.oauthToken;\n    return header;\n  }\n\n  var usernamePassword, base64;\n\n  if (options.hasOwnProperty('basic')) {\n    var basic = options.basic;\n\n    if (typeof basic === 'string') {\n      header['Authorization'] = 'Basic ' + basic;\n    } else if (typeof basic === 'object') {\n      if (basic.hasOwnProperty('username') && basic.hasOwnProperty('password')) {\n        usernamePassword = basic.username + ':' + basic.password;\n        base64 = Buffer.from(usernamePassword).toString('base64');\n\n        header['Authorization'] = 'Basic ' + base64;\n      }\n    }\n  }\n\n  if (options.hasOwnProperty('token')) {\n    header['X-Cybozu-API-Token'] = options.token;\n  } else if (options.hasOwnProperty('authorization')) {\n    var authorization = options.authorization;\n\n    if (typeof authorization === 'string') {\n      header['X-Cybozu-Authorization'] = authorization;\n    } else if (typeof authorization === 'object') {\n      if (authorization.hasOwnProperty('username') && authorization.hasOwnProperty('password')) {\n        usernamePassword = authorization.username + ':' + authorization.password;\n        base64 = Buffer.from(usernamePassword).toString('base64');\n\n        header['X-Cybozu-Authorization'] = base64;\n      }\n    }\n  }\n\n  if (!header.hasOwnProperty('X-Cybozu-API-Token') && !header.hasOwnProperty('X-Cybozu-Authorization')) {\n    throw new TypeError('Specify \"token\" or \"authorization\"');\n  }\n  return header;\n}\n\nfunction merge(source, target) {\n\n  Object.keys(source).forEach(function(key) {\n    target[key] = source[key];\n  });\n  return target;\n}\n\nfunction kintone(domain, authorization) {\n  var authOption = authFromOption(authorization);\n\n  // Add .cybozu.com if only sub-domain is specified.\n  if (!domain.match('\\\\.')) {\n    domain += '.cybozu.com';\n  }\n\n  function requestBase(link, data, callback) {\n    var clonedLink = link.slice(0);\n    var method = clonedLink.pop();\n\n    clonedLink.unshift(domain, 'k', 'v1');\n\n    var options = {\n      url: 'https://' + clonedLink.join('/') + '.json',\n      method: method.toUpperCase(),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data)\n    };\n\n    merge(authOption, options.headers);\n\n    request(options, function(err, response, body) {\n      callback(err, JSON.parse(body));\n    });\n  }\n\n  for (var i = 0; i < apis.length; ++i) {\n    var link = apis[i].split('/');\n    var head = kintone.prototype;\n\n    while (link.length !== 0) {\n      var key = link.shift();\n\n      if (!head.hasOwnProperty(key)) {\n        head[key] = {};\n      }\n      if (link.length !== 0) {\n        head = head[key];\n      } else {\n        head[key] = (function(linkStr) {\n          Object.freeze(linkStr);\n          return util.promisify(function(data, callback) {\n            return requestBase(linkStr, data, callback);\n          });\n        }(apis[i].split('/')));\n      }\n    }\n  }\n\n  kintone.prototype.file.post = util.promisify(function(filename, callback) {\n    var options = {\n      url: 'https://' + domain + '/k/v1/file.json',\n      method: 'POST',\n      headers: {},\n      formData: {\n        file: {\n          value: fs.createReadStream(filename),\n          options: {\n            filename: path.basename(filename),\n            contentType: 'text/plain'\n          }\n        }\n      }\n    };\n\n    merge(authOption, options.headers);\n\n    request(options, function(err, response, body) {\n      callback(err, JSON.parse(body));\n    });\n  });\n\n  kintone.prototype.file.get = util.promisify(function(fileKey, callback) {\n    var options = {\n      url: 'https://' + domain + '/k/v1/file.json',\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ fileKey: fileKey })\n    };\n\n    merge(authOption, options.headers);\n\n    request(options, function(err, response, body) {\n      callback(err, body);\n    });\n  });\n}\n\nmodule.exports = kintone;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}